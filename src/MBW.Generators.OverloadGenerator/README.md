# MBW.Generators.OverloadGenerator

## About
Generates overloads for methods based on declarative attributes. Apply attributes to a method or containing type and the generator emits additional overloads that either transform a parameter or supply a default value. This is useful when you want a terse public API but still allow callers to pass richer types.

Imagine an API that accepts a string kind and an optional retry flag. Callers might prefer passing an `OrderKind` enum instead of remembering the string representation, and most will keep the retry flag at its default.

## Quick Start
- Install the `MBW.Generators.OverloadGenerator` and `MBW.Generators.OverloadGenerator.Attributes` packages.
- Decorate your partial class or individual methods with `[TransformOverload]` or `[DefaultOverload]`.
- The generator emits overloads for decorated methods, preserving visibility and parameter names and keeping extension methods as extensions.

Attributes and generator are in separate packages so you can reference the attributes without running the generator.

## Example
```csharp
using MBW.Generators.OverloadGenerator;
using MBW.Generators.OverloadGenerator.Attributes;

public enum OrderKind { Standard, Express }

[TransformOverload("kind", typeof(OrderKind), "{value}.ToString(\"G\", CultureInfo.InvariantCulture)", Usings = new[] { "System.Globalization" })]
[DefaultOverload("retry", "true")]
public partial class Orders
{
    public void Create(string kind, bool retry) { }
}
```
Generates
```csharp
// <auto-generated/>
using System.Globalization;

partial class Orders
{
    public void Create(global::OrderKind kind, bool retry)
        => Create(kind.ToString("G", CultureInfo.InvariantCulture), retry);

    public void Create(string kind)
        => Create(kind, true);
}
```

## Features
- Replace parameters with strongly typed alternatives or supply defaults.
- Apply attributes at type or method level for flexible targeting.
- Supports extension methods and generic types.
- Uses incremental generators for performance.
- Emits diagnostics to help guide usage.
- Preserves original method visibility and parameter names.
- Generates interface members with default bodies where applicable.

## Attributes
- **TransformOverloadAttribute** – apply to a type or method. Replaces a string parameter with a strongly typed version. Parameters:
  - `parameter` – the name of the parameter to replace.
  - `accept` – the type callers can supply.
  - `transform` – an expression where `{value}` is substituted with the parameter.
  - `Usings` – optional namespaces added to the generated file.
- **DefaultOverloadAttribute** – apply to a type or method. Emits an overload that supplies a default expression when the specified parameter is omitted. Parameters:
  - `parameter` – the name of the parameter to default.
  - `defaultExpression` – expression inserted for the missing argument.
  - `Usings` – optional namespaces added to the generated file.

Both attributes may appear multiple times and are not inherited.

## More information
This project is provided as-is without support. Further usage examples can be found in the [tests](../MBW.Generators.OverloadGenerator.Tests).
