# MBW.Generators.GeneratorHelpers

## About
Provides allocation-free extension methods for Roslyn symbols based on predefined type and namespace strings. Annotate a type with constants representing canonical symbols and the generator emits helper methods to quickly compare symbols without allocations or `ToDisplayString` calls.

Useful when analyzing large code bases where repeated string construction would otherwise hurt performance.

## Quick Start
- Install the `MBW.Generators.GeneratorHelpers` and `MBW.Generators.GeneratorHelpers.Attributes` packages.
- Apply `[GenerateSymbolExtensions]` to a `class` or `struct` containing annotated `const string` fields.
- By default, generated extension classes reside in `Microsoft.CodeAnalysis` and are named `<TypeName>Extensions`.
- Attributes and generator ship in separate packages so you can opt out of running the generator.

## Example
```csharp
using MBW.Generators.GeneratorHelpers;

[GenerateSymbolExtensions]
internal static class Known
{
    [SymbolNameExtension]
    public const string ExceptionType = "global::System.Exception";

    [NamespaceNameExtension]
    public const string SystemNs = "System";
}
```
Generates
```csharp
// <auto-generated/>
using System;
using Microsoft.CodeAnalysis;

namespace Microsoft.CodeAnalysis;

internal static class KnownExtensions
{
    public static bool IsNamedExactlyTypeExceptionType(this ISymbol? symbol)
    {
        if (symbol is not INamedTypeSymbol t0) return false;
        if (!string.Equals(t0.MetadataName, "Exception", StringComparison.Ordinal)) return false;
        if (t0.ContainingType is not null) return false;
        var ns = t0.ContainingNamespace;
        if (!string.Equals(ns.Name, "System", StringComparison.Ordinal)) return false;
        ns = ns.ContainingNamespace;
        return ns.IsGlobalNamespace;
    }

    public static bool IsInNamespaceSystemNs(this ISymbol? symbol)
    {
        return IsInNamespaceSystemNs(symbol as INamespaceSymbol ?? symbol?.ContainingNamespace);
    }

    public static bool IsExactlyInNamespaceSystemNs(this ISymbol? symbol)
    {
        return IsExactlyNamespaceSystemNs(symbol as INamespaceSymbol ?? symbol?.ContainingNamespace);
    }

    public static bool IsInNamespaceSystemNs(this INamespaceSymbol? ns)
    {
        for (var current = ns; current is not null && !current.IsGlobalNamespace; current = current.ContainingNamespace)
        {
            if (string.Equals(current.Name, "System", StringComparison.Ordinal))
                return true;
        }
        return false;
    }

    public static bool IsExactlyNamespaceSystemNs(this INamespaceSymbol? ns)
    {
        if (ns is null) return false;
        if (!string.Equals(ns.Name, "System", StringComparison.Ordinal)) return false;
        ns = ns.ContainingNamespace;
        return ns.IsGlobalNamespace;
    }
}
```

## Features
- Generates allocation-free helpers for types and namespaces.
- Handles nested and generic types.
- Provides `ISymbol` and `INamespaceSymbol` overloads for namespace checks.

## Attributes
- **GenerateSymbolExtensionsAttribute** – apply to a type to opt in. Controls generated class name and namespace.
- **SymbolNameExtensionAttribute** – place on a `const string` field containing a fully qualified type name. Generates `IsNamedExactlyTypeN`.
- **NamespaceNameExtensionAttribute** – place on a `const string` field containing a fully qualified namespace. Generates `IsInNamespaceN`, `IsExactlyInNamespaceN`, `IsInNamespaceN` (`INamespaceSymbol`), and `IsExactlyNamespaceN`.

## More information
This project is provided as-is without support. Additional examples will be available in the [tests](../MBW.Generators.GeneratorHelpers.Tests).
